# apply for render
qrsh -l gpu -l h_vmem=40G -q "gpu.middle.q@*"



#test pretrained dispnet(on biwidl rather than render)

python3 test_disp.py --pretrained-dispnet /scratch/zfang/SfmLearner-Pytorch-master/checkpoints/kitti_sfm\,epoch_size3000\,m0.2/11-20-23\:24/dispnet_model_best.pth.tar --dataset-dir /scratch-second/zfang/kitti_original/kitti/ --dataset-list kitti_eval/test_files_eigen.txt

#train network

cd /scratch_net/biwidl204/zfang/SfmLearner-Pytorch-master
 
CUDA_VISIBLE_DEVICES=$SGE_GPU python3 train.py /scratch_net/biwidl204_second/zfang/kitti_sfm/ -b4 -m0.2 -s0.1 --epoch-size 3000 --sequence-length 3 --log-output --with-gt

#check tensorboard for tracking performance
tensorboard --logdir=checkpoints/
#for the remote usage in tensorboard, first ssh -L 16006:127.0.0.1:6006 olivier@my_server_ip, then go to that link http://127.0.0.1:16006